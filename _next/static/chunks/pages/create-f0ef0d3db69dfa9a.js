(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{6237:function(e,r,t){"use strict";t.d(r,{s:function(){return c},F:function(){return o}});var n=t(7218),u=t(6441),a=t(9251);function c(e){const r=(0,a.Y0)(e);if(r.length>31)throw new Error("bytes32 string must be less than 32 bytes");return(0,u.Dv)((0,u.zo)([r,n.R]).slice(0,32))}function o(e){const r=(0,u.lE)(e);if(32!==r.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==r[31])throw new Error("invalid bytes32 string - no null terminator");let t=31;for(;0===r[t-1];)t--;return(0,a.ZN)(r.slice(0,t))}},3093:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create",function(){return t(7021)}])},1050:function(e,r,t){"use strict";t.d(r,{T:function(){return f}});var n=t(4051),u=t.n(n),a=t(6076),c=t(6237),o=t(9874),s=t(8301);function i(e){return e.getTime()/1e3<<0}var l=t(7294);function d(e,r,t,n,u,a,c){try{var o=e[a](c),s=o.value}catch(i){return void t(i)}o.done?r(s):Promise.resolve(s).then(n,u)}function p(e){return function(){var r=this,t=arguments;return new Promise((function(n,u){var a=e.apply(r,t);function c(e){d(a,n,u,c,o,"next",e)}function o(e){d(a,n,u,c,o,"throw",e)}c(void 0)}))}}function f(){var e=(0,s.K)(),r=e.accountAddress,t=e.signer,n=(0,l.useCallback)((function(){if(!t)return Promise.reject("no account");var e=o._.future;return new a.CH(e.address,e.abi,t)}),[t]);function d(){return(d=p(u().mark((function e(t,a,s,l){var d,p,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("no account address found");case 3:return e.next=5,n();case 5:return d=e.sent,p=c.s(s),e.next=9,d.createNew(r,t,i(a),p,l*Number("1e".concat(o._.token.decimal)),"0x00");case 9:return f=e.sent,e.next=12,f.wait();case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.error("cound not get future contract",e.t0),e.abrupt("return",Promise.reject("cound not get future contract & Error:".concat(e.t0)));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}var f=(0,l.useCallback)((function(){(function(){var e=p(u().mark((function e(){var r,t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:return r=e.sent,e.next=6,r.setApprovalForAll(o._.exchange.address,!0);case 6:return t=e.sent,e.next=9,t.wait();case 9:return e.abrupt("return",t.hash);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[n]),h=(0,l.useCallback)((function(e){return function(){var e=p(u().mark((function e(t){var a,c,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("no account address found");case 3:return e.next=5,n();case 5:return a=e.sent,e.next=8,a.getFutureTokenData(r,t);case 8:return c=e.sent,s={id:c.futureTokenId.toNumber(),totalSupply:c.totalSupply.toNumber(),balance:c.balance.toNumber(),expire:new Date(1e3*c.expire.toNumber()).toLocaleDateString("th-TH"),currentPrice:c.currentPrice.toNumber()/Number("1e".concat(o._.token.decimal))},e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",Promise.reject("cound not get future contract & Error:".concat(e.t0)));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r){return e.apply(this,arguments)}}()(e)}),[r,n]),v=(0,l.useCallback)((function(){return function(){var e=p(u().mark((function e(){var t,a,c,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("no account address found");case 3:return e.next=5,n();case 5:return t=e.sent,e.next=8,t.getLatestIdCreated();case 8:for(a=e.sent,c=[],o=1;o<=a.toNumber();o++)s=h(o),c.push(s);return e.next=13,Promise.all(c);case 13:return e.abrupt("return",e.sent);case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}()()}),[r,n,h]);return{getFutureContract:n,newFutureContract:function(e,r,t,n){return d.apply(this,arguments)},getFutureTokenData:h,getAllFutureTokenData:v,approveAll:f}}},7021:function(e,r,t){"use strict";t.r(r);var n=t(4051),u=t.n(n),a=t(5893),c=t(7294),o=t(1050);function s(e,r,t,n,u,a,c){try{var o=e[a](c),s=o.value}catch(i){return void t(i)}o.done?r(s):Promise.resolve(s).then(n,u)}function i(e){return function(){var r=this,t=arguments;return new Promise((function(n,u){var a=e.apply(r,t);function c(e){s(a,n,u,c,o,"next",e)}function o(e){s(a,n,u,c,o,"throw",e)}c(void 0)}))}}r.default=function(e){var r=(0,c.useState)(10),t=r[0],n=r[1],s=(0,c.useState)("2022-02-10"),l=s[0],d=s[1],p=(0,c.useState)("STH"),f=p[0],h=p[1],v=(0,c.useState)(1),x=v[0],m=v[1],b=(0,o.T)(),w=b.newFutureContract,g=b.getFutureTokenData,y=(b.getAllFutureTokenData,(0,c.useState)(0)),k=y[0],j=y[1],N=(0,c.useState)({id:0,totalSupply:0,balance:0,expire:"",currentPrice:0}),C=N[0],F=N[1],P=function(){var e=i(u().mark((function e(r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=new Date(l),e.next=4,w(t,n,f,x);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();function E(){return(E=i(u().mark((function e(){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(k);case 2:r=e.sent,F(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{"data-theme":"light",className:" text-[40px]",children:"Create Page"}),(0,a.jsxs)("form",{className:" flex flex-col",onSubmit:P,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"amount",children:"Amount"}),(0,a.jsx)("input",{id:"amount",type:"number",className:" border-2 rounded-md px-2",placeholder:"amount",value:t,onChange:function(e){return n(Number.parseFloat(e.target.value))}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"expire",children:"Expire"}),(0,a.jsx)("input",{id:"expire",type:"date",className:" border-2 rounded-md px-2",placeholder:"expire",value:l,onChange:function(e){return d(e.target.value)}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"key",children:"Key"}),(0,a.jsx)("input",{id:"key",type:"text",className:" border-2 rounded-md px-2",placeholder:"key",value:f,onChange:function(e){return h(e.target.value)}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"",children:"Price"}),(0,a.jsx)("input",{id:"price",type:"number",className:" border-2 rounded-md px-2",placeholder:"price",value:x,onChange:function(e){return m(Number.parseFloat(e.target.value))}})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:" bg-orange-100 px-4 py-2 mt-2 rounded-lg border-2",children:"Create"})})]}),(0,a.jsx)("div",{children:"Balance"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"bl1"}),(0,a.jsx)("input",{id:"bl1",type:"number",className:" px-2 border-2 rounded-md",value:k,onChange:function(e){return j(Number.parseInt(e.target.value))}}),(0,a.jsx)("button",{className:"py-2 px-4 rounded-lg bg-pink-200",onClick:function(){return E.apply(this,arguments)},children:"Check"})]}),(0,a.jsxs)("div",{children:["Balance: ",C.balance]}),(0,a.jsxs)("div",{children:["Total Supply: ",C.totalSupply]}),(0,a.jsxs)("div",{children:["Expire: ",C.expire]}),(0,a.jsxs)("div",{children:["Price: ",C.currentPrice]})]})}}},function(e){e.O(0,[774,888,179],(function(){return r=3093,e(e.s=r);var r}));var r=e.O();_N_E=r}]);