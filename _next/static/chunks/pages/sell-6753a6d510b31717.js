(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{5261:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sell",function(){return t(522)}])},1050:function(e,r,t){"use strict";t.d(r,{T:function(){return f}});var n=t(4051),u=t.n(n),a=t(6076),c=t(6237),o=t(8912),s=t(320);function i(e){return e.getTime()/1e3<<0}var l=t(7294);function p(e,r,t,n,u,a,c){try{var o=e[a](c),s=o.value}catch(i){return void t(i)}o.done?r(s):Promise.resolve(s).then(n,u)}function d(e){return function(){var r=this,t=arguments;return new Promise((function(n,u){var a=e.apply(r,t);function c(e){p(a,n,u,c,o,"next",e)}function o(e){p(a,n,u,c,o,"throw",e)}c(void 0)}))}}function f(){var e=(0,s.K)(),r=e.accountAddress,t=e.signer,n=(0,l.useCallback)((function(){if(!t)return Promise.reject("no account");var e=o._.future;return new a.CH(e.address,e.abi,t)}),[t]);function p(){return(p=d(u().mark((function e(t,a,s,l){var p,d,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("no account address found");case 3:return e.next=5,n();case 5:return p=e.sent,d=c.s(s),e.next=9,p.createNew(r,t,i(a),d,l*Number("1e".concat(o._.token.decimal)),"0x00");case 9:return f=e.sent,e.next=12,f.wait();case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.error("cound not get future contract",e.t0),e.abrupt("return",Promise.reject("cound not get future contract & Error:".concat(e.t0)));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}var f=(0,l.useCallback)((function(){(function(){var e=d(u().mark((function e(){var r,t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:return r=e.sent,e.next=6,r.setApprovalForAll(o._.exchange.address,!0);case 6:return t=e.sent,e.next=9,t.wait();case 9:return e.abrupt("return",t.hash);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[n]),v=(0,l.useCallback)((function(e){return function(){var e=d(u().mark((function e(t){var a,c,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("no account address found");case 3:return e.next=5,n();case 5:return a=e.sent,e.next=8,a.getFutureTokenData(r,t);case 8:return c=e.sent,s={id:c.futureTokenId.toNumber(),totalSupply:c.totalSupply.toNumber(),balance:c.balance.toNumber(),expire:new Date(1e3*c.expire.toNumber()).toLocaleDateString("th-TH"),currentPrice:c.currentPrice.toNumber()/Number("1e".concat(o._.token.decimal))},e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",Promise.reject("cound not get future contract & Error:".concat(e.t0)));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r){return e.apply(this,arguments)}}()(e)}),[r,n]),h=(0,l.useCallback)((function(){return function(){var e=d(u().mark((function e(){var t,a,c,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("no account address found");case 3:return e.next=5,n();case 5:return t=e.sent,e.next=8,t.getLatestIdCreated();case 8:for(a=e.sent,c=[],o=1;o<=a.toNumber();o++)s=v(o),c.push(s);return e.next=13,Promise.all(c);case 13:return e.abrupt("return",e.sent);case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}()()}),[r,n,v]);return{getFutureContract:n,newFutureContract:function(e,r,t,n){return p.apply(this,arguments)},getFutureTokenData:v,getAllFutureTokenData:h,approveAll:f}}},522:function(e,r,t){"use strict";t.r(r);var n=t(4051),u=t.n(n),a=t(5893),c=t(7294),o=t(9742),s=t(1050);function i(e,r,t,n,u,a,c){try{var o=e[a](c),s=o.value}catch(i){return void t(i)}o.done?r(s):Promise.resolve(s).then(n,u)}function l(e){return function(){var r=this,t=arguments;return new Promise((function(n,u){var a=e.apply(r,t);function c(e){i(a,n,u,c,o,"next",e)}function o(e){i(a,n,u,c,o,"throw",e)}c(void 0)}))}}r.default=function(e){var r=(0,s.T)(),t=r.getAllFutureTokenData,n=r.approveAll,i=(0,o.h)().onSell,p=(0,c.useState)([]),d=p[0],f=p[1],v=(0,c.useState)(0),h=v[0],x=v[1],b=(0,c.useState)(0),m=b[0],w=b[1],k=(0,c.useState)(""),j=k[0],N=k[1];function g(){return(g=l(u().mark((function e(){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(h,m);case 2:r=e.sent,N(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.useEffect)((function(){function e(){return(e=l(u().mark((function e(){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:(r=e.sent)&&f(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,j]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-[40px]",children:"Your Assets"}),(0,a.jsx)("div",{children:"Your Token"}),(0,a.jsx)("hr",{}),d.filter((function(e){return e.balance>0})).map((function(e,r){return(0,a.jsxs)("div",{className:" cursor-pointer",onClick:function(){return r=e.id,t=e.balance,x(r),void w(t);var r,t},children:[(0,a.jsxs)("div",{children:["Future Token Id: ",e.id]}),(0,a.jsxs)("div",{children:["Balance: ",e.balance]}),(0,a.jsxs)("div",{children:["Total Supply: ",e.totalSupply]}),(0,a.jsxs)("div",{children:["Expire: ",e.expire]}),(0,a.jsxs)("div",{children:["Price: ",e.currentPrice]}),(0,a.jsx)("hr",{})]},r)})),(0,a.jsx)("hr",{}),(0,a.jsx)("div",{className:"text-[30px]",children:"Sell"}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"px-4 py-2 bg-purple-200 border-2 rounded-xl",onClick:n,children:"Arrpove"})}),(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sellId",children:"ID"}),(0,a.jsx)("input",{type:"number",className:" px-4 rounded-md border-2",value:h,onChange:function(e){return x(Number.parseInt(e.target.value))}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"amount",children:"Amount"}),(0,a.jsx)("input",{type:"number",className:" px-4 rounded-md border-2",value:m,onChange:function(e){return w(Number.parseInt(e.target.value))}})]}),(0,a.jsx)("button",{className:" bg-red-300 hover:bg-red-400 hover:text-white duration-500 px-4 py-2 border-2 rounded-lg",onClick:function(){return g.apply(this,arguments)},children:"Sell"})]})]})}}},function(e){e.O(0,[561,742,774,888,179],(function(){return r=5261,e(e.s=r);var r}));var r=e.O();_N_E=r}]);