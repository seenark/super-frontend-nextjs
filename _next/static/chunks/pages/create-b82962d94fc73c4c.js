(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{3093:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create",function(){return t(7021)}])},1050:function(e,r,t){"use strict";t.d(r,{T:function(){return f}});var n=t(4051),a=t.n(n),u=t(6076),c=t(6237),o=t(8912),s=t(320);function i(e){return e.getTime()/1e3<<0}var l=t(7294);function p(e,r,t,n,a,u,c){try{var o=e[u](c),s=o.value}catch(i){return void t(i)}o.done?r(s):Promise.resolve(s).then(n,a)}function d(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var u=e.apply(r,t);function c(e){p(u,n,a,c,o,"next",e)}function o(e){p(u,n,a,c,o,"throw",e)}c(void 0)}))}}function f(){var e=(0,s.K)(),r=e.accountAddress,t=e.signer,n=(0,l.useCallback)((function(){if(!t)return Promise.reject("no account");var e=o._.future;return new u.CH(e.address,e.abi,t)}),[t]);function p(){return(p=d(a().mark((function e(t,u,s,l){var p,d,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("no account address found");case 3:return e.next=5,n();case 5:return p=e.sent,d=c.s(s),e.next=9,p.createNew(r,t,i(u),d,l*Number("1e".concat(o._.token.decimal)),"0x00");case 9:return f=e.sent,e.next=12,f.wait();case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.error("cound not get future contract",e.t0),e.abrupt("return",Promise.reject("cound not get future contract & Error:".concat(e.t0)));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}var f=(0,l.useCallback)((function(){(function(){var e=d(a().mark((function e(){var r,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:return r=e.sent,e.next=6,r.setApprovalForAll(o._.exchange.address,!0);case 6:return t=e.sent,e.next=9,t.wait();case 9:return e.abrupt("return",t.hash);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[n]),h=(0,l.useCallback)((function(e){return function(){var e=d(a().mark((function e(t){var u,c,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("no account address found");case 3:return e.next=5,n();case 5:return u=e.sent,e.next=8,u.getFutureTokenData(r,t);case 8:return c=e.sent,s={id:c.futureTokenId.toNumber(),totalSupply:c.totalSupply.toNumber(),balance:c.balance.toNumber(),expire:new Date(1e3*c.expire.toNumber()).toLocaleDateString("th-TH"),currentPrice:c.currentPrice.toNumber()/Number("1e".concat(o._.token.decimal))},e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",Promise.reject("cound not get future contract & Error:".concat(e.t0)));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r){return e.apply(this,arguments)}}()(e)}),[r,n]),x=(0,l.useCallback)((function(){return function(){var e=d(a().mark((function e(){var t,u,c,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("no account address found");case 3:return e.next=5,n();case 5:return t=e.sent,e.next=8,t.getLatestIdCreated();case 8:for(u=e.sent,c=[],o=1;o<=u.toNumber();o++)s=h(o),c.push(s);return e.next=13,Promise.all(c);case 13:return e.abrupt("return",e.sent);case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}()()}),[r,n,h]);return{getFutureContract:n,newFutureContract:function(e,r,t,n){return p.apply(this,arguments)},getFutureTokenData:h,getAllFutureTokenData:x,approveAll:f}}},7021:function(e,r,t){"use strict";t.r(r);var n=t(4051),a=t.n(n),u=t(5893),c=t(7294),o=t(9742),s=t(1050);function i(e,r,t,n,a,u,c){try{var o=e[u](c),s=o.value}catch(i){return void t(i)}o.done?r(s):Promise.resolve(s).then(n,a)}function l(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var u=e.apply(r,t);function c(e){i(u,n,a,c,o,"next",e)}function o(e){i(u,n,a,c,o,"throw",e)}c(void 0)}))}}r.default=function(e){var r=(0,c.useState)(10),t=r[0],n=r[1],i=(0,c.useState)("2022-02-10"),p=i[0],d=i[1],f=(0,c.useState)("STH"),h=f[0],x=f[1],v=(0,c.useState)(1),m=v[0],b=v[1],w=(0,s.T)(),g=w.newFutureContract,k=w.getFutureTokenData,j=(w.getAllFutureTokenData,(0,o.h)()),y=(j.onOpenTradeCreated,j.onOpenTradeCreated2,(0,c.useState)(0)),N=y[0],C=y[1],P=(0,c.useState)({id:0,totalSupply:0,balance:0,expire:"",currentPrice:0}),F=P[0],T=P[1],_=function(){var e=l(a().mark((function e(r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=new Date(p),e.next=4,g(t,n,h,m);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();function S(){return(S=l(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(N);case 2:r=e.sent,T(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{"data-theme":"light",className:" text-[40px]",children:"Create Page"}),(0,u.jsxs)("form",{className:" flex flex-col",onSubmit:_,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"amount",children:"Amount"}),(0,u.jsx)("input",{id:"amount",type:"number",className:" border-2 rounded-md px-2",placeholder:"amount",value:t,onChange:function(e){return n(Number.parseFloat(e.target.value))}})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"expire",children:"Expire"}),(0,u.jsx)("input",{id:"expire",type:"date",className:" border-2 rounded-md px-2",placeholder:"expire",value:p,onChange:function(e){return d(e.target.value)}})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"key",children:"Key"}),(0,u.jsx)("input",{id:"key",type:"text",className:" border-2 rounded-md px-2",placeholder:"key",value:h,onChange:function(e){return x(e.target.value)}})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"",children:"Price"}),(0,u.jsx)("input",{id:"price",type:"number",className:" border-2 rounded-md px-2",placeholder:"price",value:m,onChange:function(e){return b(Number.parseFloat(e.target.value))}})]}),(0,u.jsx)("div",{children:(0,u.jsx)("button",{type:"submit",className:" bg-orange-100 px-4 py-2 mt-2 rounded-lg border-2",children:"Create"})})]}),(0,u.jsx)("div",{children:"Balance"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"bl1"}),(0,u.jsx)("input",{id:"bl1",type:"number",className:" px-2 border-2 rounded-md",value:N,onChange:function(e){return C(Number.parseInt(e.target.value))}}),(0,u.jsx)("button",{className:"py-2 px-4 rounded-lg bg-pink-200",onClick:function(){return S.apply(this,arguments)},children:"Check"})]}),(0,u.jsxs)("div",{children:["Balance: ",F.balance]}),(0,u.jsxs)("div",{children:["Total Supply: ",F.totalSupply]}),(0,u.jsxs)("div",{children:["Expire: ",F.expire]}),(0,u.jsxs)("div",{children:["Price: ",F.currentPrice]})]})}}},function(e){e.O(0,[561,742,774,888,179],(function(){return r=3093,e(e.s=r);var r}));var r=e.O();_N_E=r}]);