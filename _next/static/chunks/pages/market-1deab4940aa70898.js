(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[776],{6237:function(e,r,n){"use strict";n.d(r,{s:function(){return s},F:function(){return c}});var t=n(7218),u=n(6441),a=n(9251);function s(e){const r=(0,a.Y0)(e);if(r.length>31)throw new Error("bytes32 string must be less than 32 bytes");return(0,u.Dv)((0,u.zo)([r,t.R]).slice(0,32))}function c(e){const r=(0,u.lE)(e);if(32!==r.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==r[31])throw new Error("invalid bytes32 string - no null terminator");let n=31;for(;0===r[n-1];)n--;return(0,a.ZN)(r.slice(0,n))}},8906:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/market",function(){return n(9779)}])},9742:function(e,r,n){"use strict";n.d(r,{h:function(){return f}});var t=n(4051),u=n.n(t),a=n(7294),s=n(6076),c=n(6237),o=n(9874),i=n(8301);function l(e,r,n,t,u,a,s){try{var c=e[a](s),o=c.value}catch(i){return void n(i)}c.done?r(o):Promise.resolve(o).then(t,u)}function p(e){return function(){var r=this,n=arguments;return new Promise((function(t,u){var a=e.apply(r,n);function s(e){l(a,t,u,s,c,"next",e)}function c(e){l(a,t,u,s,c,"throw",e)}s(void 0)}))}}function f(){var e=(0,i.K)().signer,r=(0,a.useCallback)((function(){return function(){var r=p(u().mark((function r(){var n,t;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return",Promise.reject("no account"));case 2:return n=o._.exchange,t=new s.CH(n.address,n.abi,e),r.abrupt("return",t);case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()()}),[e]),n=(0,a.useCallback)((function(e,n){return function(){var t=p(u().mark((function t(){var a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r();case 3:return a=t.sent,t.next=6,a.sell(e,n);case 6:return s=t.sent,t.next=9,s.wait();case 9:return t.abrupt("return",s.hash);case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}()()}),[r]),t=(0,a.useCallback)((function(e,n){return function(){var t=p(u().mark((function t(){var a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r();case 3:return a=t.sent,t.next=6,a.buy(e,n);case 6:return s=t.sent,t.next=9,s.wait();case 9:return t.abrupt("return",s.hash);case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}()()}),[r]),l=(0,a.useCallback)((function(e){return function(){var n=p(u().mark((function n(){var t,a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r();case 3:return t=n.sent,n.next=6,t.cancelSell(e);case 6:return a=n.sent,n.next=9,a.wait();case 9:return n.abrupt("return",a.hash);case 12:return n.prev=12,n.t0=n.catch(0),n.abrupt("return",Promise.reject(n.t0));case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(){return n.apply(this,arguments)}}()()}),[r]),f=(0,a.useCallback)((function(e){return function(){var n=p(u().mark((function n(){var t,a,s;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r();case 2:return t=n.sent,n.next=5,t.openForTrades(e);case 5:return a=n.sent,s={sellId:a.sellId.toNumber(),seller:a.seller,futureTokenId:a.futureTokenId.toNumber(),amount:a.amount.toNumber(),status:c.F(a.status)},n.abrupt("return",s);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[r]),d=(0,a.useCallback)((function(){return function(){var e=p(u().mark((function e(){var n,t,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:return n=e.sent,e.next=6,n.getAllSellIdOpenForTrades();case 6:return t=e.sent,a=t.map((function(e){return f(e.toNumber())})),e.next=10,Promise.all(a);case 10:return s=e.sent,e.abrupt("return",s);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}()()}),[r,f]),h=(0,a.useCallback)((function(e,n){return function(){var t=p(u().mark((function t(){var a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r();case 3:return a=t.sent,t.next=6,a.redeemFromToken(e,n);case 6:return s=t.sent,t.next=9,s.wait();case 9:return t.abrupt("return",s.hash);case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}()()}),[r]),v=(0,a.useCallback)((function(e,n){return function(){var t=p(u().mark((function t(){var a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r();case 3:return a=t.sent,t.next=6,a.redeemFromNFT(e,n);case 6:return s=t.sent,t.next=9,s.wait();case 9:return t.abrupt("return",s.hash);case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}()()}),[r]),x=(0,a.useCallback)((function(){return function(){var e=p(u().mark((function e(){var n,t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:return n=e.sent,e.next=6,n.getUsedNFTs();case 6:return t=e.sent,e.abrupt("return",t.map((function(e){return{customer:e.customer,tokenId:e.tokenId.toNumber(),amount:e.amount.toNumber()}})));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()()}),[r]);return{getExchangeContract:r,onSell:n,onBuy:t,getOpenTrade:f,getAllOpenTrades:d,cancelSell:l,redeemFromToken:h,getUsedFutureToken:x,redeemFromFutureContract:v}}},9779:function(e,r,n){"use strict";n.r(r);var t=n(4051),u=n.n(t),a=n(5893),s=n(7294),c=n(8301),o=n(9742),i=n(9532);function l(e,r,n,t,u,a,s){try{var c=e[a](s),o=c.value}catch(i){return void n(i)}c.done?r(o):Promise.resolve(o).then(t,u)}function p(e){return function(){var r=this,n=arguments;return new Promise((function(t,u){var a=e.apply(r,n);function s(e){l(a,t,u,s,c,"next",e)}function c(e){l(a,t,u,s,c,"throw",e)}s(void 0)}))}}r.default=function(e){var r=(0,o.h)(),n=r.getAllOpenTrades,t=r.onBuy,l=r.cancelSell,f=r.redeemFromToken,d=(0,c.K)().accountAddress,h=(0,s.useState)([]),v=h[0],x=h[1],m=(0,i.d)().approve,b=(0,s.useState)(0),w=b[0],k=b[1],g=(0,s.useState)(0),y=g[0],j=g[1],N=(0,s.useState)(""),C=N[0],F=N[1];function T(){return(T=p(u().mark((function e(){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(w,y);case 2:r=e.sent,F(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=p(u().mark((function e(){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(w);case 2:r=e.sent,F(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=p(u().mark((function e(){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(w,y);case 2:r=e.sent,F(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,s.useEffect)((function(){(function(){var e=p(u().mark((function e(){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:r=e.sent,x(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n,C]);var _=(0,s.useMemo)((function(){return 0!==w&&!(v.findIndex((function(e){return e.seller===d}))<0)}),[d,v,w]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-[40px]",children:"Market"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:"Open Trade"}),(0,a.jsx)("hr",{}),v.map((function(e,r){return(0,a.jsxs)("div",{className:" cursor-pointer",onClick:function(){return k((r=e).sellId),void j(r.amount);var r},children:[(0,a.jsxs)("div",{children:["ID: ",e.sellId]}),(0,a.jsxs)("div",{children:["Future Token Id: ",e.futureTokenId]}),(0,a.jsxs)("div",{children:["seller: ",e.seller===d?"YOU":e.seller]}),(0,a.jsxs)("div",{children:["amount: ",e.amount]}),(0,a.jsxs)("div",{children:["status: ",e.status]}),(0,a.jsx)("hr",{})]},r)})),(0,a.jsx)("button",{className:"px-4 py-1 bg-orange-300 rounded-lg border-2 hover:bg-orange-400 duration-500 text-white",onClick:m,children:"Approve token"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[20px]",children:"Buy"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sellId",children:"ID"}),(0,a.jsx)("input",{type:"number",className:" px-4 rounded-md border-2",value:w,onChange:function(e){return k(Number.parseInt(e.target.value))}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"amount",children:"Amount"}),(0,a.jsx)("input",{type:"number",className:" px-4 rounded-md border-2",value:y,onChange:function(e){return j(Number.parseInt(e.target.value))}})]}),_?(0,a.jsx)("button",{className:" bg-red-300 hover:bg-red-400 hover:text-white duration-500 px-4 py-2 border-2 rounded-lg",onClick:function(){return I.apply(this,arguments)},children:"Cancel"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:" bg-red-300 hover:bg-red-400 hover:text-white duration-500 px-4 py-2 border-2 rounded-lg",onClick:function(){return T.apply(this,arguments)},children:"Buy"}),(0,a.jsx)("button",{className:" bg-purple-300 hover:bg-purple-400 hover:text-white duration-500 px-4 py-2 border-2 rounded-lg",onClick:function(){return P.apply(this,arguments)},children:"Redeem using SuperX"})]})]})]})}}},function(e){e.O(0,[774,888,179],(function(){return r=8906,e(e.s=r);var r}));var r=e.O();_N_E=r}]);